<!DOCTYPE html>
<html>
<head>
    <title>Weather</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script>

        function gettingJSON(){
            //document.write("jquery loaded");
            $.getJSON("http://api.openweathermap.org/data/2.5/forecast?id=524901&appid=4ba63d16825755a279cabc0a923b7b0d&units=metric",function(data){
                //document.write(JSON.stringify(data));
                var result = data,
                        weather = {},
                        compass = ['N', 'NNE', 'NE', 'ENE', 'E', 'ESE', 'SE', 'SSE', 'S', 'SSW', 'SW', 'WSW', 'W', 'WNW', 'NW', 'NNW', 'N'],
                        image404 = 'https://s.yimg.com/os/mit/media/m/weather/images/icons/l/44d-100567.png';
                console.log(result);
                var weathers = [];
                //TO DO calculate the hours to get 5 day forecast.
                for (var i = 0; i < 3; i++) {
                    weathers.push({
                        temp: Math.round(result.list[i].main.temp),
                        //code: result.list[i].weather.id,
                        text: ucfirst(result.list[i].weather[0].description),
                        date: new Date(result.list[i].dt * 1000)
                    });
                }
                console.log(weathers);
                document.write(weathers);
                var today = weathers[0];
                var tomorrow = weathers[1];
                var dayAfterTomorrow = weathers[2];
            });
        }

        function ucfirst(str) {
            var firstLetter = str.slice(0, 1);
            return firstLetter.toUpperCase() + str.substring(1);
        }

        var weatherUrl = 'http://api.openweathermap.org/data/2.5/forecast/daily?q=London&APPID=4ba63d16825755a279cabc0a923b7b0d&units=metric';
        $.getJSON(
                encodeURI(weatherUrl),
                function (data) {

                    if (data !== null && data.list !== null) {
                        var result = data,
                                weather = {},
                                compass = ['N', 'NNE', 'NE', 'ENE', 'E', 'ESE', 'SE', 'SSE', 'S', 'SSW', 'SW', 'WSW', 'W', 'WNW', 'NW', 'NNW', 'N'],
                                image404 = 'https://s.yimg.com/os/mit/media/m/weather/images/icons/l/44d-100567.png';
                        console.log(result);
                        var weathers = [];
                        for (var i = 0; i < 3; i++) {
                            weathers.push({
                                temp: Math.round(result.list[i].temp.day),
                                code: result.list[i].weather[0].id,
                                text: ucfirst(result.list[i].weather[0].description),
                                date: new Date(result.list[i].dt * 1000)
                            });
                        }
                        console.log(weathers);
                        document.write(weathers);
                        var today = weathers[0];
                        var tomorrow = weathers[1];
                        var dayAfterTomorrow = weathers[2];
                    } else {
                        console.log('There was a problem retrieving the latest weather information.');
                    }
                }
        );
    </script>
</head>
<body>
<button id = "getIt" onclick = "gettingJSON()">Get JSON</button>
</body>
</html>